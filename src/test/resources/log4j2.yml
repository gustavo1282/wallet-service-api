Configuration:
  status: WARN
  name: Log4j2Config

  Properties:
    Property:
      - name: LOG_PATTERN
        value: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %X{traceId} %c - %msg%n"

  Appenders:
    Console:
      name: ConsoleAppender
      target: SYSTEM_OUT
      PatternLayout:
        pattern: ${LOG_PATTERN}

    RollingFile:
      - name: AppFileAppender
        fileName: logs/application.log
        filePattern: logs/application-%d{yyyy-MM-dd}.log.gz
        PatternLayout:
          pattern: ${LOG_PATTERN}
        Policies:
          TimeBasedTriggeringPolicy:
            interval: 1
            modulate: true

      - name: AuditFileAppender
        fileName: logs/audit.log
        filePattern: logs/audit-%d{yyyy-MM-dd}.log.gz
        PatternLayout:
          pattern: ${LOG_PATTERN}
        Filters:
          MarkerFilter:
            marker: AUDIT
            onMatch: ACCEPT
            onMismatch: DENY
        Policies:
          TimeBasedTriggeringPolicy:
            interval: 1
            modulate: true

  Loggers:
    Root:
      level: INFO
      AppenderRef:
        - ref: ConsoleAppender
        - ref: AppFileAppender
