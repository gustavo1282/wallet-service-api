spring:
  application:
    name: wallet-service-api

  profiles:
    active: local

  jackson:
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false

# Configurações globais de upload (perfil local pode sobrescrever)
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 10MB

server:
  port: 8080

logging:
  level:
    root: INFO
    com.guga.wallet: DEBUG

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

# Configurações globais do JWT (sobrepostas por profiles)
jwt:
  issuer: wallet-service-api
  expiration-minutes: 20

# DB genérico (perfil local/docker substituem)
datasource:
  driver-class-name: org.postgresql.Driver

# Componentes compartilhados (swagger, upload CSV, etc)  
components:
  requestBodies:
    FileUpload:
      description: Arquivo CSV a ser importado.
      required: true
      content:
        multipart/form-data:
          schema:
            type: object
            properties:
              file:
                type: string
                format: binary

paths:
  /api/customers/upload:
    post:
      summary: Importa dados de Clientes via CSV.
      requestBody:
        $ref: '#/components/requestBodies/FileUpload'
      responses:
        '200':
          description: Upload bem-sucedido.

  /api/wallets/upload:
    post:
      summary: Importa dados de Carteiras via CSV.
      requestBody:
        $ref: '#/components/requestBodies/FileUpload'
      responses:
        '200':
          description: Upload bem-sucedido.

  /api/transactions/upload:
    post:
      summary: Importa dados de Transações via CSV.
      requestBody:
        $ref: '#/components/requestBodies/FileUpload'
      responses:
        '200':
          description: Upload bem-sucedido.
